<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        /*
        js的数据类型：
        基本数据类型：
        引用数据类型：object(Array,function,Date,RegExp);
        为什么会出现深浅拷贝？
        根源在于引用数据类型，深浅拷贝仅存在于引用数据类型和基本数据类型无关
        什么是堆和栈？
         对于基本数据类型来说，数据都保存在内存的栈区
         什么是堆和栈？ 
         对于基本数据类型来说，数据都保存在内存的栈中，以键值对的形式
         对于引用数据类型来说，栈内存中保存的是地址的引用，

         什么是深浅拷贝？
         深拷贝：复制对象的地址，而不是对象本身，新旧对象还是共用一块内存，其中有一方改变，另一方会受影响
         深拷贝：会创造出来一个一模一样的对象，新旧对象不共享一块内存，修改新对象不会改变原有对象
        */

        // var arr=[1,2,3];
        
        // var arr1=arr;
        // arr1.push(4)
        // console.log(arr)
        // 对象深浅拷贝的方法
        // 序列化与反序列化 JSON.stringify , JSON.parse

        // 深拷贝方案一：序列化与反序列化实现深拷贝
        // let obj={'name':'丽丽',c:{'name':'joker','age':4 }};
        // let obj2=JSON.parse(JSON.stringify(obj));
        // obj2.c.age=20;
        // console.log(obj2)
        // JSON.stringify(obj) 内存里开辟了一个新的地址，在使用反序列化
        // 转成js对象 这种方式有弊端 undefined和null 是无法拷贝过去的


       // 方案二 通过for in 循环+递归函数
        let obj3={'name':'陈哈哈',c:{'age':4 }};
        function  deepClone(target){
            //定义一个空的对象盛放拷贝后的数据
            var newObj=null;
            //容错处理，由于null类型属于object 但又不能循环操作，所以要排除掉
            if(typeof(target) == 'object' && target!= null){
                //判断target的类型 Array(),object()  
                // instanceOf()
                newObj = target instanceof Array? [] : {};
                //处理 for in循环对象属性
                for(key in target){
                    newObj[key] = target[key];
                }
            }else{
                return newObj = target;
            }
            return newObj;
        }
        console.log( deepClone(obj3))
        obj3.name='啦啦啦';
        console.log(obj3)

    //jquery 里面也有深浅拷贝方法 extend()
    // extend(第一个参数，第二个参数，第三个参数（可选）)
    // 第一个参数是true 就是深拷贝，false 浅拷贝，必须
    </script>
</body>
</html>